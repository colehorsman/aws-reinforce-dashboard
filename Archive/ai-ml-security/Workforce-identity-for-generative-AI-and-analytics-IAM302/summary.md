# AWS re:Inforce 2025 - Workforce identity for generative AI and analytics (IAM302)

**Video Link:** [Watch on YouTube](https://www.youtube.com/watch?v=shE26-Zt81w)

## Video Information
- **Author:** AWS Events
- **Duration:** 41.9 minutes
- **Word Count:** 7,017 words
- **Publish Date:** 20250620
- **Video ID:** shE26-Zt81w

## Summary
This session by Bridget introduces the concept of "user-aware AWS" - enabling workforce identity to flow through AWS services for personalized data access and generative AI experiences. The presentation covers connecting corporate directories to AWS via IAM Identity Center, implementing trusted identity propagation (TIP) to maintain user context across services, and applying these concepts to both data analytics (Redshift, Lake Formation, S3) and generative AI (Amazon Q for Business). Key demonstrations show how user identity flows from authentication through multiple AWS services, ensuring that users like "Pickles the horse" only access appropriate data based on their group memberships. The session includes live demos of Redshift query editor with federated Lake Formation tables and Amazon Q for Business with user-specific document access.

## Key Points
- **User-Aware AWS Concept**: Connect corporate directory once to AWS, enable data access based on user identity/groups, maintain user context across all AWS services
- **IAM Identity Center Myths Debunked**: Not required to be identity provider, not mandatory for AWS account access management, applications can be provisioned from member accounts
- **Trusted Identity Propagation (TIP)**: Core feature enabling user context to flow between services via IAM roles with STS set context capability
- **Customer Success Story**: Real customer eliminated manual identity provisioning, hard-coded credentials, achieved centralized governance and automatic access control
- **Service Integration Requirements**: Each application must connect to Identity Center, downstream services need IAM roles with TIP enabled, STS set context in trust policies
- **Token Flow Architecture**: Identity provider token → Identity Center introspection → role assumption with user context → service-to-service propagation
- **Audit and Compliance**: CloudTrail logs capture actual user identity for all data access, enabling precise audit trails and compliance reporting
- **Third-Party Integration**: Trusted token issuers enable external applications to participate in identity propagation through token exchange
- **Amazon Q for Business**: Same identity propagation concepts apply to generative AI, ensuring personalized responses based on user permissions to underlying data
- **Implementation Checklist**: Connect identity provider, enable TIP on services, configure roles with set context, establish trusted token issuers for third parties

## Technical Details
- **Identity Center SCIM Integration**: Automatic user/group synchronization from external identity providers (Ping, Okta, Entra) with attribute mapping
- **Role-Based Propagation**: IAM roles with "sts:SetContext" permission enable user context attachment to role credentials across service boundaries
- **Redshift Configuration**: Identity Center connection with trusted identity propagation to Lake Formation, role-based access control for user groups
- **Lake Formation Integration**: Identity Center instance connection, data permissions based on Identity Center group principals, federated table access control
- **CloudTrail User Logging**: User ID appears in CloudTrail events when services use role credentials with attached user context
- **Trusted Token Issuer Setup**: Establishes trust between external identity providers and Identity Center through issuer URL and attribute mapping (email to email)
- **Amazon Q Business Architecture**: Token exchange flow from identity provider → Identity Center → role credentials → Q Business with user-aware document access
- **Service Control Policy Compatibility**: All existing IAM guardrails, SCPs, RCPs, and data perimeters continue to apply to TIP-enabled roles
- **Cross-Service Token Flow**: Identity provider token → Identity Center validation → role assumption → downstream service propagation with maintained user context
- **Multi-Service Audit Trail**: Each service in the chain (Redshift → Lake Formation → S3) logs user access independently for comprehensive audit coverage

## Full Transcript

Hope you had an amazing few days. It's so great to just be inundated with everybody who cares about security and all the different facets of it. So today we're gonna talk about workforce identity so you have a workforce you have them somewhere in an identity provider and you wanna light up generative AI apps. You wanna light up data analytics. You want them to have access to all the data, but you want it to be based on their identity so that Bridget is always rigid and so that's what we're gonna talk about today. So this is what the next hour looks like. I'm gonna talk about a journey to a more user aware or identity aware AWS, creating a user aware AWS environment, connecting your corporate directory to AWS. I'll talk a little bit about a customer who we worked with to light this up in production. Um, there is a reinvent talk that actually has the customer talking, so I'm just gonna summarize, um, but I think it's really important to realize that this does actually work in production and helps simplify your data access based on users. Then we're gonna deep dive and we're gonna go a little deep. We're gonna do some token dances we're gonna talk about authentication, some assume roll stuff. My hope here is that if you really understand how the tokens are passed around and how you understand how off happens and the identity gets passed. Through you will understand how to use this and power your analytics with user where access controls. Now we're gonna pop out to the side a little bit and we're gonna apply the same exact concepts to generative AI with Q for Business and I'll wrap up. I'll tell you all the things to take home with you. So you might be like, Bridget, we, we haven't heard this journey to a more user aware AWS. We haven't heard about user aware AWS so I wanna talk about it a little bit and I like to talk about where AWS was and where it's going to. So for years AWS has been superb at launching and having cloud infrastructure services. These are your buckets, your instances, your lambda functions, your, uh, step functions, like all the things, right? You all know that very well, and you would set up federation from your corporate directory into an AWS account. Great, everyone knows that pattern. But with the growth and a lot more of a lot of apps on the way we call these AWS manage applications like your Amazon Quick site, your Amazon Q where the workforce needs to authenticate into an application bubble, um, but they also need data access, they also need user specific experiences. And so as we started to talk to our customers about these manage applications experiences, we this is what we heard we want customers to make sure their workforce users have access to the data and the correct access at every layer so no matter what thing you put on top of it as they traverse through, they always are bridge it and their access control always depends on them or their attributes. They wanna be able to audit the specific users who have access. They wanna add chatbots that have more personalized experiences, um, and we need AWS to know who these users are and that they should be able to start at an application and then use the targeted use use cases for those applications. So I would like to introduce a user wear AWS. I would also like to introduce Pickles. Um, Pickles is my horse. um, he's also our engineer for the day. So all of our examples are gonna be pickles based, um, and what a user where AWS is is you connect your corporate directory once to AWS. Data access is based on user identity and groups. This makes sure that like Pickles actually can get the access that he needs and can't get the. that he doesn't personalized experiences are lit up because they're specific and personalized to pickles or horses and as um pickles goes through AWS Pickles is always pickles and he's not transforming identities. So how does this work? Let's talk about creating a user where AWS environment. So here are the ingredients. You have your corporate directory. These would be your paying your OCTA, your intras, whatever corporate directory you have. This does not need to change. You, you will use this. You will connect it to AWS, so you need an AWS environment, an AWS organization that has multiple member accounts, and then obviously you're gonna be using services and applications like I just mentioned. Also, the ingredients are data and analytics. Hopefully you have some data in AWS, whether that's S3, maybe some lake formation tables, red shifts, lots of data services, and then hopefully you're exploring or have already started using some applications, and we have I think about 38 applications and probably more on the way, um, but some top ones that I hear recently my conversations with customer are Que developer, queue for Business, Quick site, those those seem to be quite popular these days. So lighting up a user aware AWS, three parts. First, connect your corporate directory to AWS. You only have to do this once and you're gonna do it via IM Identity Center. So you bring your identities connected to Identity Center. Via skim we sync and store your identity so they are available to all those apps and all those services for that user aware experience then you can specify data access controls based on the identity or the groups or the attributes that you care about, right? So and the way that this is possible is a feature called trusted identity propagation. So if I had to, we also call it tip internally TIP. So you might wanna take a pro tip away from this and go investigate and learn about trusted identity propagation. There's my joke of the day. And so you can specify these access controls, but the coolest part is, is all the tip enabled services and experiences in AWS will log the user through and that way you will know who the like who accessed your data. You also can have, say, uh, in like formation horses are allowed to access this table. And furthermore, we're taking that same foundation and putting it into generative AI so that pickles is always pickles as pickles may it work with a chatbot to ask questions about your wikis and so that's the little sneak peek over the demos that I'm gonna show you. Alright, so I mentioned Identity Center at the beginning and we're gonna talk a lot about Identity Center today, but you, the one thing I need you to take away because Identity Center, there's been a lot of mis mis. Confusion about what it is and what it's not, so I have some myths that I'm gonna demystify today but you use Identity Center to connect your workforce to AWS. You connect it once, bunch of stuff gets lit up if you wanna use it. So we do store, um, have a user store for your Abi organization so we sync users via skim. uh, we do it once, lit up everywhere. This also means that from member accounts AWS application access can happen. You can instantiate Quick site. You can instantiate a connectance and all that. And then with trusted identity propagation we make sure all those users are available all the way through AWS so you can have user specific data access and personalized experience. So myth number one that I'm gonna bust is you have to use IM Identity Center as your identity provider false. Uh, yes, Identity Center has a tiny native store. This would probably be for very small customers, maybe startups getting started. They don't have an identity provider yet like a ping or an OCTA or an Ear or whatnot. And so the goal with Identity Center is you continue to use your identity provider wherever it is. This is your source of truth for your workforce. You connect it to AWS via Identity Center and then we make it available for all of your AWS workloads. So like I mentioned, I identity Center does have additional functionality so you can use these features but you don't have to. So one, we have this native identity store so if you don't have an identity provider, this is not very many customers, people just getting started or maybe for your personal like I, I will demo it today because I have a very small org for my demo set up um we also allow provision. Visioning of IM rolls for human access to AWS accounts. Uh, what we found is a lot of customers already have a system whether they purpose built this for their own company or, um, they have it, uh, they've procured one from a third party. So we do this too. You can use it, it's kind of great, but you don't have to. And then the other thing is, is, um, most customers are gonna connect their identity provider at the org level so that it's available all the way through, but if you're not ready to do that you can connect it for just an account instance of identity Center. This is really helpful to just kind of get started, get some feelers out, just see if you wanna light up some apps. This brings us to our next myth um that I'm going to bust is if you use Identity Center you have to use it for managing access to AWS accounts and I am permissions and this is false. The truth is, is you can enable Identity Center and continue to use it, your existing tools that provision IM roles for human access, um, Federated data. US you can use your existing stuff you do not have to use the account access feature inside Identity Center. You can also take it a step further and you're like, I don't wanna use that at all. I don't want it to be available. Um, we've actually published a blog post that shows you how to use service control policies to restrict it so you don't need it, so you can continue to use your existing tools for human access via rolls to AWS accounts. So on a serious note, this is Pickle serious face. This is his horse show Game face, um, use Identity Center to connect your workforce to AWS that is its main use case, um, and you don't have to use all the functionality available to you. All right, now that I got my point across, uh, connect your corporate directory to AWS. What does this look like? So you can see on the screen we have our external IDP. You can figure the relying parties. You can figure the skim, you have your groups, you have your users. This should all be normal. You all know what this looks like inside your identity provider via skim it goes over to AWS AWS in Identity Center. That's the identity source you connect you, you, uh, set the identity source and then you enable programmatic visioning and we sync it up we store it, and then this becomes available to all the applications so you can see this is OCTA this is gonna be what I'm gonna use for my identity provider today you you connected to AWS identity Center. It's all there and then the rest happens. You only have to do this once and your IT admin team is most likely the the team that's doing that. So identity identity information in AWS connect your identity provider, users and groups are synced in attributes. They're refreshed based on SIM standards, and then your local administrators get to grant access to those groups. So now your workforce is connected. This is where it gets exciting. The rest was was just set up. What's next? You can connect once and access lots, right? So you have your personalized experience that's our cue offerings, uh, queue for Business, quick site. You have a bunch of host applications, um, that you can supply chain connect all the things, and then what we care a lot about today is the user where access to data and so this is what you can light up once you connect your workforce. This brings me to my third myth is that um you have to provision the AWS manage applications from the identity center instance which will be in your orgs management account that's a pretty not many people go into that account very often, right? And so that is actually not true. What ends up happening is. Once you connect your identity center, your identity provider and use identity center, you go into the member accounts and anybody with let's say connect permissions can instantiate a connect, uh, application and connect the identity center, uh, uh, for the workforce to come in and federate and to connect. Same thing with like formation. You go and you have like formation permissions you connected to identity center which will say and then you'll say horses have access to this table. So this is the customer story that we're gonna talk about and this is, this is a real story of what a customer did with user aware data access, right? So this was their previous set up they had a data user, they had a corporate workspace, you had to request access, there was an approval stage. It triggered some admin flow. There was a manual work around. Does it sound painful? Are you cringing a lot right now? Yeah, OK, and you might have tools like this right now. Uh, the challenges this customer had was manual identity provisioning, authentication and hard coded credentials, fragmented experience. So they had sensitive data requirements. They needed strong authentication and authorization mechanisms. They needed some data governance, um, especially around data ownership and approval models. They needed a catalog where there was sensitive data and established that owner, and they needed to comply with a new data governance process. So what did they do? They had Ontra, they connected to Identity Center, they configured Redshift with Identity Center. They define groups in the IDP and that is the source of truth because all the access controls um and this is the Redshift role based access control going to Redshift horses are allowed access to this table, humans are allowed access to that table. And so their new flow. Is data user comes in request access there's some approval stage you wanna make sure people don't get access to all the data, right? And then what happens is the user gets added to a group and then access works so user get added to a group. That gets skimmed into identity Center. Redshift is able to know that about the user, and Redshift can have, um, grant or appropriate access. Automatic provisioning, no hard code of credentials, credentials, and centralized government. Sounds pretty sweet, huh? So this is kind of what their architecture look like at a very high level. You have the data user going into the analytics tool, federate in through their identity provider. Uh, the identity provider and Identity Center trusted each other. Then as they queried Red data in Redshift, Red Shift said, hey, Identity Center, is Pickles a horse? And Identity Center was like, yeah. And then Redshift can say, OK, they have access to this sensitive data of carrots. So what were the business outcomes for this customer? Centralized identity governance across applications, no hard coded credentials, reduced administrative and operational load. We are all on a day of moving faster and getting people to move faster, enhanced security measures, um, scalable access control, and comprehensive logging activity because what I didn't mention in the last slide is every time that user made a query, uh, for the analytics tool, it popped up in cloud trail or in Redshifts logs depending on the tool. All right, you guys ready to go talk about some token stuff, maybe? All right, so we're gonna jump into user aware data access. So we set up Identity Center. We're gonna connect our data services to IM Identity Center. We're gonna allow passing of the user context from service to the downstream services, and then we're gonna audit user specific data access. This is what winning looks like. So this is the example we're gonna work through today. I know it's a lot, but we're gonna revisit this multiple times to break it down for you. All right, so we have pickles. Authenticates and queries, goes to, um, today we're gonna use the query editor with Redshift. There will be some local tables in there. There will be some federated tables. Those federated tables come from lake formation with data stored in S3. And what's gonna happen is that each step of the way, the red shift, the lake formation, the the S3. Um, Redshift is gonna obtain Pickle details by talking to Identity Center via token. Use and log Pickle details, so this would be used like an access control. Does Pickles have access? Do horses have access? And then Redshift is gonna pass the identity down to Lake Formation. Lake Formation is gonna go do the same thing, gonna go obtain Pickles details. Is Pickle still authenticated? Is Pickle still even an employee at this company? Is Pickle still a horse? And then use it for access control, log it, and then pass it down to S3 and then S3 will just log that Pickles had the access because the access control lives in like formation itself. So this is the set up and I wanna talk through this because it it it does it does truly matter and it also comes with a benefit so you connect your applications to Identity Center. Why do you need to do that? You need to do that so that at each step of the way those services can talk to Identity Center to get the correct information about Pickles and his groups. Um, you assign your users and groups access to the application. Why do you need to do that? Well, we have to make sure that Pickles can authenticate into Redshift or in, uh, go, go to like formation and make sure there's access there. Then you're gonna connect your applications with trusted identity propagation. So this is tip, and you're gonna do this via a roll, so trusted identity propagation in its simplest form. It is a role talks from service A to service B and it has a little user identifier on it and it just passes it through. This role is really powerful, and I'm gonna mention this a few times is because this means it's an IM credential and an IM credential in AWS is really powerful because it means all of your guard rails, your service control policies, your resource control policies, your guard rails, your data perimeters that you put on your AW environment still apply, and that is the power of this. We passed the identity around, but the coarse grain guard rails that you have on your rolls always apply. So this is what we'll we'll kind of do this in the demo this is what your red shift uh configuration looks like you can see it has a role we'll talk about that. You can see we've enabled trusted identity propagation to like formation and you can see the identity center instance that it's connected to. Uh, this is like formation as you can see we have, um, the identity center instance that it's connected to and the role itself. OK, so we're gonna go into a demo. I'm gonna do live demos today because why not, right? Um, if it messes up, you all can just cheer me on. Sounds good. Uh, let me press the button. All right, when I am in Chrome, I'm gonna be more of an administrator. When I am in Firefox, I'm gonna be Pickles the deaf, all right, so I'm Bridget the administrator. I'm actually gonna go into um my management account oops, I need to log in. Typing a password when you do a demo live is like the most nerve-wracking thing ever. So I'm gonna go and I'm gonna show you my identity center instance. And if you were paying attention you would see that there is an instance here and um you'll see the applications. What applications should we see? Redshift and lake Formation. Look at what we see. We see Redshift, two of these, one for Redshift itself and one for the query editor, and we also see Lake Formation. You can also see where my next demos are gonna be with Q for Business, OK. The other thing we're gonna look at is we have our users. These are coming in from OCTA. We have Pickles and we have Bridget. This is the one I just authenticated with and you can see what type of groups we have. We have human users and horse users. How convenient is that? All right, uh, so that is number one and we've already talked about the applications. I'm gonna go into a member account. And this is where you will see we'll go to red shift and we'll go to lake formation. So I'm actually going to. Preload just to get things moving. So we have like formation here. Identity center and you can see what I just showed you. So it's all connected and all working. I'm also gonna show you this. We have our tables, human and horse tables, and. We have our data permissions. I'll probably show you this a few times, but I just want you to get used to it. Very similar um aspect to Redshift. Where are we here? Identity center. Click on your red shift instance and you can see it's all connected. All right, so we are set up. So we're gonna go configure userware data access. So we've made sure that Redshift is connected to Identity Center. We have made sure that Lake Formation is connected to Identity Center check box check box, and we've made sure that Redshift can pass the information to Lake Formation. Uh, that was the trusted identity propagation. I'll show it on the next one. I didn't point it out specifically. OK, this is where we get into some, some. Some user detail stuff. So what happens is, is Pickles is gonna log in to Redshift query editor, um, via his identity token from the identity provider. Identity center is gonna introspect that token. It's gonna verify that Pickle user session is still valid, gonna determine that Pickles is pickles, and it's gonna retrieve the user in groups and attributes, and it's gonna send that back to Redshift. So what the outcome will be is Pickles is still pickles, nobody else, and he's a horse at the barn. Then Redshift is gonna use that. So based on user groups attributes and services specific access controls, Redshift, you can say uh horses have access to this table, so you can kind of see that, and then Redshift will log every time Pickles accesses the data. All right, mind blown, um. One myth that we're talking about is Identity Center centrally manages fine grain permission within the application. That does not happen, right? Identity Center makes all the identity information aware to Redshift the access controls are with Identity Center itself. Identity Center does manage the access to the application, the front door of the app, the front door of Redshift, but not the actual access controls within it. And that's where you'll see, uh, viewing the assignments you can see where Pickles has different applications Redshift we'll talk about Q Business later on. These are viewing the access controls within lake formation I showed that to you. You can see where horses have access to treats humans have access to treats. They're all based on an identity center group and that ID is very, very important. All right, so we're gonna live demo this. So Pickles is gonna query Redshift and make sure that he can only access the right horse treats and so we're gonna query just the local tables first and then we'll go down to the next one. All right, so I was Bridget. I don't wanna be Bridget anymore. I wanna be pickles. So I'm gonna log in as pickles. Oops, not now. Here we go. Oh no. All right. Give me a second here. Here we go. sign in again. Sometimes it gets a little wonky because you change networks. All right, so I've logged in as pickles. This is my member account. I'm gonna go to the query editor. Um, I am also at the same time as we go into here. I'm gonna go to red shift here. And go to the query editor. So I'm gonna flop back and forth a little bit between dev and all right, so I do need to create a connection and I am logged in as Pickles into Firefox so this just kind of reloads so I'm Pickles, the user in Firefox, um. And I'm actually going to, as the owner here, see if that works. I'm gonna log in as the admin admin of my red shift because I wanna show you the logs. All right, so Pickles is gonna run a query just on local tables. It's Halloween, he has an outfit, so should he be able to. Look at his outfits, and the answer is yes, he can wear all of these things. That's fantastic. Where did that come from? That came from uh an access control within Redshift which I'm gonna show you. Oh, it's already preloaded so I'm just gonna keep it so we don't waste time but horse users can have access to the outfit schema that's where that access control comes from. OK, you're like, well, Bridget, I wanna know that he accessed in what he did, right, so we'll run and look at our logs and you'll see that it was logged as pickles once it pops up. That's for local table access we haven't gotten to the federated access from Lake Formation quite yet. Should we wait for it? I can come back. Oh, there it is. All right, so you can see I was playing around earlier today, but we have Pickles, the horse, and you can see. Exactly what query Pickles just ran. Pretty darn cool, right? Because it's Pickles, it's the actual user going from there. All right, success. Now we're gonna go over to Lake Formation. So we've used pickles, uh, we've obtained pickles, we've passed pickles or we use in log pickles, and now we're gonna pass. How does this pass happen? It's all based on a roll. I'm gonna show you the roll in a second. Identity center gets user contexts. It assumes the role, attaches the user contexts, gets role credentials, and passes it to the next service. This means if you have a deny like formation, you're bussed right here because it's a role, right? And that's the benefit is I am guardrails still apply. The pro tip here is that those roles between red shift and like formation must have STS set context. It must be there. So looking at this role specifically, um, there's a role that, uh, I forget what we named it, but it was between Redshift and leg formation and so you can see it has access to leg formation it has access to assume roles um, the Redshift service can do that and it has the STS set context. This means they can pass that identifier in the role. And When that pops up, it will also log to Cloud trail, which is really powerful and you can see it was uh that role Redshift and then the service Redshift and then there's your user ID which I can show you in the identity center instance itself. All right, so we're gonna go and do the lake formation tables. I'm gonna show you the access controls and lake formation. I'm also gonna show you the identities. You're gonna query data from federated tables and then we'll go inspect the logs. So here we go, it should be a lot of fun. Demo, here we go. All right, so I'm gonna go back. Uh, actually I'm gonna start as my admin here with, here's all the things, right? So the horse can look at the treats here and the humans can look at the treats here. Um, But only human treats. So if you look at, we look at 999, um, this is the principle. And then B9 is the principle, so you will see here, I'm gonna just show you, um. This is the oops, here we go. This is the horses, they have less access. Here, only horse treats can they see, whereas the humans can get both the horse treats and the human treats. So let's give it a whirl. We're over here. We are still pickles. We're in Firefox. So what should happen? Yes? Oh no. Do we need to edit our connection again, continue? If it doesn't work, I'll, you can just. All right, well, let's try the other one. I don't know what happened here. Well, that's a bust you guys wanna see the video? Um, Now I feel really horrible. We are pickles. We should have access. Um, let's try edit connection. Go back or I can refresh. I think sometimes this has happened before where our connection didn't work when I changed networks and I feel really bad about it and we keep getting errors, so I can. Show you the video. Sorry about that, folks. Um, but we'll just, the connection seems to be a little off, so I don't know how to get it back. I apologize for that, but I can tell you it worked an hour ago. Um, so we can imagine that that would that did work or didn't work for the user. I can show you as, um, actually let me go back and let's play around. We have some time. Why not? Um, I'm gonna pop out to the query editor. I'm going to edit my connection. I'm going to go back as Brigid. And let's hope that she has access to both of these tables. Here we go. And you can see because I wanna show you the logs that's gonna be the main part here right you can see that she has access to her her her treats and she should have access to the horse treats as well and then I'm gonna pop out over the cloud trail. So you can at least see that it was event history. Um, of that name. Access data. We just go query. Oh, I think it's called access data, but forget get access data there we go. Oh well, let's just go down, um, and you can see all the update connections and through and this is, let me just. Well, I forgot the name of the um. Oh, there we go. Get where to go. Area There we go. And you can see the event record and the cool part here is you see this ID right here. And because I did a little cheat here. Um, You can see 26 as Bridget, so it was logged as the user ID specifically there and that is the cool part about it because it's completely audible so you know who access your data. Um, when it comes to permission guardrails, uh, I want to make sure everybody knows that permission guardrails still apply for AWS manage applications, and this is because the role is used to pass that, uh, user identification user ID around. And so if you deny the service, if you deny access to a specific table, a specific resource, those still apply. So going back to our demo you can see now one part didn't work I'll go figure that out later but um we have Redshift we have Lake formation at both stages they obtained Pickles details they passed they used and logged, they passed and then did it all over again for lake formation and at the end of the day we actually logged pickles, but I used Bridget. So we talk about user where data access. I want you to know these things because you're like, how do I set this up? How do I make sure it's it's legit. Each application must be connected to Identity Center, so you need to make sure that's true. This wouldn't work if Redshift wasn't attached to Identity Center. This wouldn't work if like Formation wasn't connected to Identity Center. So that has to be step one. Each service must be connected to the downstream service with an IM roll. That's pretty default. You probably have that set up today and TI has to be enabled. And that role needs that context in that trust policy so those are the the places where customers get stuck. We are working on services to get tip enabled. We're working on flows so that that flows all the way through and then along the way each service is gonna go get pickles user data and you use it, log it and pass it to the next one, and this is how user, uh, data user aware data access happens and how it flows all the way through. So you might be saying, but Bridget, we use a third party. So you're adding a third party. What happens? So that third party, that blue box that I just added, will have the identity provider's token. It'll have pickles. Pickles is authenticated to that identity provider and what happens is that third party will pass that identity provider token to Identity Center. Identity Center will know what to do with it because you're gonna set up a trusted token issuer with OCTA with the IDP. Then that third party will exchange the the identity provider token with an identity center token, and then they can assume a role set that role context, pass those role creds to Athena, and it works just the same way, right? It's assume role with set context. That's all trusted identity propagation is. So why do you need that trusted token issuer? You would use this to establish trust between that third party. The identity provider and the identity center and the identity center instance you have, it must be configured with the same identity provider if it comes from two different identity providers, Pickles is two different horses. Requirements for a trusted token issuer. Third party applications connect to identity center. There's an issuer URL. You do some attribute mapping like email to email. This is what it looks like. You can see we have our trusted token issuer OCTA. Um, if you click in, you will see the um the email mapping that we use. Oh, don't need to click in right here. took a screenshot of it so you can see email the identity provider attribute with the identity center attribute that is used via skim. All right, so now everybody loves GAI. Let's talk about Gen AI and why and how this is connected to data analytics. I hope you all are asking yourself this question. So with Q for Business, right, you can create chatbots, you can integrate a bunch of different sources, uh, a bunch of different plug-ins you can execute commands, questions, all of that, but it's personalized and you gotta make sure that Pickles is a horse or you're an admin and you're a user, so this is Que for Business. And this is how it's set up so we have Q in the middle. It will be connected to your identity provider via identity center. It also gets connected to all of those documents and things that it ingests, and then the user gets to query, but you wanna make sure that that user has permissions to the underlying data, right? So if uh let's say I'm querying and it's a wiki, you wanna make sure that it shows manager information because I'm a manager, but if Pickle starts querying, you wanna make sure that it doesn't show manager information because he's not a manager. So this is how it works. You have your identity provider, you have pickles. Pickles gets an identity provider token. Then the token gets changed for roll credentials with user context. We just talked about that flow. Those role credentials get passed to Amazon Q and then Amazon Q will know exactly who Pickles is. Looks familiar, sounds familiar. It's the same thing we just did with trusted token issuer. So you have a workforce application, you want to power with Q, you need it to become user aware, so you gotta make sure you do the token dance. So this is how it works. You will have your identity provider, identity center. You have your workforce application. We're gonna say wiki wiki querier, um, powered by Amazon Q. Amazon Q will do the, the token dance for you. Go get the creds. It'll come through the identity provider, do the dance just like we talked about. And then it will have a role and so you have your identity provider token issuer identity center gets the the user contacts, assumes role you can use those creds to access anything it needs to. Should we try it out? All right, so we have this demo, um, I have, um, we're gonna walk through the configuration steps. I'll show you the trust trusted token issuer. I'll show you the applications connected, and we'll go from there. Um, so let's head over to Q for Business. And you can see I have an application. And. You can essentially see how it's set up. It's it's access management is identity center. Um, if I were to go into the main account, which I can if you want me to pop over here, this is our master account. You'll see when I showed you the apps before Q Business was attached to the identity center instance. Why is it attached? Well, hopefully you've been listening. It needs so Q Business can go get the information it needs to about the users. So here we go, our applications. And Q Businessweet treats. There we go. We obviously had some, some temp ones. All right, so I'm gonna go over to my Cubiz app here. You can find this URL in the console and I'm going to be Pickles. Hopefully this one will work this time. So I'm gonna log in. I've logged in as pickles. Because I already had a session. All right, let's ask some questions. Can pickles get a list of horse treats? So Pickles should only be able to get access to the horse data because it. I, he's a horse, right? So it's all based on the group access there. Um, you can obviously see I asked. So yes, these are all the horse treats that pickles can have. Now, Pickles might want to ask if horses like candy corn. Or ice cream we can. We can talk about that. It's a little slow, not gonna lie. No answer found. Why was no answer found? Well, because Pickles is a horse. He does not have access to that data. So now I'm gonna actually go pop over to. Be Bridget. What do you think Bridget's gonna learn? Bridget is gonna learn about her favorite treats. Here we go. Oops. Can I get ice cream? Let's do that one. And she can't. Authenticated different human horse different treats please don't feed your horse ice cream. I've actually never tried it before. I don't know if it's healthy or not for horses, but that's that's the difference um and that's all because of that identity propagation that we talk about. We could go look at the logs. Alright, so if you're wrapping up, if you're bringing this back to your organization, top 10 items to take back with you is connect your identity provider to IM Identity Center, connect your data analytics and generate generative AI apps to Identity Center. Enable trusted propagation for your user where Pickles is always pickles as I'm seeing more and more Gen AI use. Cases that operate on data on behalf of users putting that data access control closest to the data is being really important because no matter which way pickles comes in you want the access control to be based on their groups or their attributes um so that horses only get access to horse data. And this is winning, so create a trusted token uh issuer. This will help with your Gen AI do the cred dance, uh, use cloud trail and service logs to track data access and that user. So any time AWS sees a roll credential with that user context set, it will log the user, and that's really, really powerful. Um, because that means you can see what Pickles actually access and stay up to date about more user aware AWS. Thank you everyone for coming. I'll be in the back taking photos or or not taking photos, answering questions. I'll probably take a photo though too, um, and I apologize for my demo not working, but. The one at reinvent when I did it, it did work so you can go check it out there on on the YouTube. Thanks everyone.
