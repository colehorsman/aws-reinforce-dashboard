# AWS re:Inforce 2025 -No more IAM cleanup: How KKR automated access and permissions at scale (IAM222)

**Video Link:** [Watch on YouTube](https://www.youtube.com/watch?v=rjg43IN_EeQ)

## Video Information
- **Author:** AWS Events
- **Duration:** 17.9 minutes
- **Word Count:** 3,214 words
- **Publish Date:** 20250619

## Summary
This AWS re:Inforce 2025 session (IAM222) presents KKR's journey from IAM chaos to automated permissions management using Sonrai's security platform. Delivered by Cole Horseman, Cloud Security at KKR, the presentation details how a lean security team transformed an environment with 2,200 identities with unused sensitive permissions and 1,500 unused identities into a well-governed, automated system.

The session emphasizes the reality many organizations face: inheriting legacy environments with access keys everywhere, admin access for developers, no formal IAM governance, and overwhelming technical debt that seems impossible to address manually. KKR's situation was compounded by operating during a merger, having only a two-person security team, and facing audit pressures while maintaining business continuity. The presentation demonstrates how they moved from reactive problem identification to proactive automated remediation.

The core solution involved implementing Sonrai's "permissions firewall" approach, which includes service blocking, identity quarantining ("zombie" management), third-party access control, and just-in-time (JIT) access. Rather than removing permissions and risking business disruption, the system blocks unused identities and services while maintaining the ability to quickly reinstate access through automated approval workflows. This approach enabled KKR to achieve comprehensive IAM governance across multiple environments (development, QA, production) with different risk tolerances while supporting developer productivity through self-service capabilities and Teams-based approval workflows.

## Key Points
- KKR started with 2,200 identities with unused sensitive permissions and 1,500 completely unused identities managed by only 2 security team members
- Traditional IAM cleanup approaches (manual remediation, basic monitoring tools, custom development) proved inadequate for scale and risk
- Sonrai's permissions firewall approach blocks services and identities rather than removing permissions, eliminating business disruption risk
- Just-in-time (JIT) access replaced standing admin access with Teams-based approval workflows that complete within seconds
- "Zombie" identity quarantining uses tagging to block unused identities after 90 days while preserving ability to quickly reinstate
- Service Control Policies automated through CloudFormation enable granular service blocking at different organizational scopes
- Third-party access whitelisting automatically blocks unauthorized external access to S3 buckets and STS assume roles
- Developer self-service capabilities in development environments democratize security controls while maintaining oversight
- Implementation took 6 days versus 6+ months for custom development approach
- System scales automatically as new roles and identities are created, maintaining security posture without manual intervention

## Technical Details
- **Identity Management**: 2,200+ identities across multiple AWS accounts with automated quarantining based on 90-day usage thresholds
- **Service Control Implementation**: CloudFormation-based deployment using stacks and stack sets with version control integration
- **Permissions Firewall**: Granular service blocking at organization, OU, and account levels with automated Resource Control Policies
- **JIT Access Architecture**: Teams integration with man-in-the-middle approval mechanism providing seconds-level access provisioning
- **Zombie Identity Management**: Tag-based quarantining system that preserves permissions while blocking access until approval
- **Third-Party Controls**: Automated whitelisting for external S3 bucket access and STS assume role operations
- **Multi-Environment Strategy**: Different risk profiles for development (flexible), QA (selective), and production (restrictive) environments
- **Approval Workflows**: Teams chat application integration with automated approval routing and evidence generation
- **Audit Integration**: AI-generated summaries of privileged access activities with webhook integration to ServiceNow for change control
- **Exemption Management**: Customizable thresholds and business-critical process protection through upfront exemption configuration
- **Merger Support**: Dual organization management during M&A activities with flexible policy application across different methodologies
- **Cost Optimization**: Automatic service blocking preventing unauthorized service usage and associated costs
- **Developer Empowerment**: Self-approval capabilities for development environments with junior developer oversight controls
- **Evidence Generation**: Automated audit trail creation with reports for compliance and change control documentation

## Full Transcript

I'm Cole Horseman, uh, cloud security at KKR. That really means I just have a lot of slashes in my role. um, here to talk today about identity and access management, pretty hot topic at reinforced this year, so I'm excited about that. Um, and the topic is kind of how we looked at identity access management started with a lot of problems, um, and ultimately how we found solutions through automation, um, so yeah, without further ado. Agenda is I'll run in through run through I am trap, um, so kind of like what our priority burn down and things like that, how we tried to address it in multiple ways that weren't automated, um, which cost us a lot of time. And then the discovery that kind of uh pivoted our approach to identity access management, um, and then the results and and how how we can help you. All right, so the identity or the IAM trap, um, we were chasing a lot of things. We had a like a legacy environment, access keys everywhere, admin access everywhere. I'm sure all of you can relate to that, um. Really no formal dedicated role to identity and access management when I came in. In fact, I came in as a cloud engineer not to actually come in and focus on identity. We realized there was a gap, so I started getting more dedicated to security, which is included identity at the time. But where do you start? You you fix all the bleeding here? Do you focus on how we should build this going forward, splitting the time between that. Also a very lean team. There were, it was just me to begin with dedicated to this role. Uh, how do you fix all that with, you know, 100 access keys that had, you know, no idea what processes were, were where, what they had access to, etc. So before we discovered Sunry, um, something I just passed through my LinkedIn feed, um, somebody mentioned it to me and I, I looked at it and it was like, oh this is the these are the problems that we're trying to solve. But before we had that we had, uh, 2200 identities with unused sensitive permissions. So that's a one guide to 2000 identity ratio, not really practical to solve in a manual way, obviously, uh, 1500 unused identities, um. The the the roles that we had out there, you know, NHIs that just weren't doing anything, um, we had, like I said, full admin access for developers, we had one shared production account me coming in, I had no idea what this thing needed to do. This was before a lot of the new AWS services that could point out like access analyzer and things like that, um. The access keys were out of control, no automated way to rotate those, and then we had audit kind of in between like, uh, you know, challenging us to make sure that we had um access key exploration and things like that. Um, yeah, no governance, no guard rails, it was just AWS raw. So we started to get some tools that helped highlight issues and that's kind of where they stopped. We had the ability to see problems we had the ability to see where they were connected and how bad the issue was, and we even added later contextual data. So now we know we've got sensitive data, we've got identity issues overly permissive access, and again go back to the problem where we don't have a way to fix it, we just have ways to highlight problems, um. Service control policies as you hopefully you know are aware of them, they could be pretty powerful. um I've definitely had my issues where you know the old saying you got to break a few eggs to bake an omelet. I've broken some eggs, uh, trying to fix things is gonna break production processes that we had. A shared environment to access keys that we didn't know what had access to. There were a few processes that we had to kind of risk um breaking to make progress, we ran into character limits. We also ran into we want service control policies that are applied at the org, but we also want some exceptions in individual accounts or OUs that are, you know, special in some way or another. How do we apply service control policies in an automated way at different at different scopes. Again, uh, team was two person team. We, we got somebody else in to kind of help out, but it was a job that we're gonna take approach to um. We were gonna try to build our own solution. It was gonna take about 6 months for us to figure out a pipeline to automate this, um, to figure out a least privileged pipeline, and even then, if we start removing permissions, obviously we're gonna have problems come up from that too. So when we found when we found the uh the permissions firewall, um, Sunry we were able to take the services and block those at the root, but we also had services like Bedrock where we really only want to allow that in one account for testing right when we when it comes out we had a lot of people that were trying to figure it out, but we wanted to centralize it in one space that was a safe area to do testing for AI services. So, um, the service uh uh the service block allowed us to do that. With um at a granular level at a certain scope and then also do it in a cloud formation stack so it was automated under the hood and the deployment took minutes so that we could do this very quickly. We could respond when someone needed access to a new service. They respond to us and we could do that pretty like in an agile fashion, I guess, really quickly. Um, third parties, so we discovered some, oh sorry, identities. We were, another problem that we were faced with is all those unused identities so sunry refers to those as zombies. Um, any unused permission that has identity that hasn't been used in, you know, set your threshold 90 days, for example, we could go through and apply a block to that identity. Initiate a permission on demand through a Teams application that would allow us to within seconds reinstantiate that identity when needed um and a lot of cool ways that we could automate this again devs were happy with it because we security and Teams benefited because we could lock those identities down devs were happy with it because we could do it within a few seconds. It didn't interrupt their process, um. So we want to be able to do that. Third parties just getting the visibility of who had access externally to our environment was a huge lift. Sunry actually does something about it as well. They do, they can do a third party blocks where essentially we can whitelist external access to our S3 buckets, STS assume rules, those danger zones you don't really want third parties that you haven't identified. We can block them automatically with RCPs under the hood. So permissions we wanted to make sure that we restrict um and we're going through a merger at this at this time so we've got a couple of different situations. We got two organizations, two methodologies. Sunry can meet you where you're at. We on the insurance side we're heavily regulated. We're audited pretty rigorously and those um unused permissions, we're we kind of went ripped the band-aid and we're able to block the services that we wanted to block again initiate those POD requests permissions on. Demand keep things moving, but we also developed a system to where developers could self-approve in their development environment, get used to the platform we kind of democratized the the firewall component to our app teams, so we work together to kind of figure out a way that worked for them and additionally they have junior developers now that are coming in and they're using the permissions fire or the permissions on demand to make sure that a junior developer isn't making some. Um, change to their S3 bucket policy or something that they're not aware of, so we've kind of shifted into allowing oversight from the security team and allowing developers who know what's expected in their environment, who are the users, why are they doing this? They're gonna have a lot more context on what what services are trying to be accessed and why. So um the the permissions and being able to do that kind of allowed for us to work together and I think has really helped us work in the same direction with application teams. So another benefit coming into KKR we've had a couple of um a couple of scenarios come up where we didn't have a mechanism. We had a couple of super users in in in accounts that were um full admins kind of the standing access. Sunary has a jet access approach that also has the man in the middle, the um. The team's approval mechanism. So if I need to go access the production account, I can't just go do that without an approval message. So I'll go go into the uh the account. I'll get a message from teams that says, hey, you need to request access to this account. After that approval again within seconds they're up and moving and it's all kind of um it's all very fluid process all the chat apps process again within seconds I'm getting access to that account. So this is a diagram of how we set it up. We delegate our um we delegate our organizations to the identity account that we have dedicated for this, um, so in development, this is just an example of how we have in development we have the service deny example. So at the organization Sunray is controlling. The service denied for like an internet of things service that AWS um has has released or bedrock. So those are your blanket. I think that's been covered today as well. Those are your blanket thou shalt not. Now when you start looking at the um other accounts, so this is distributed to our QA account as well, we apply third party block for like PrismaCloud or something like that. We, we decline them or say we're we're shifting to a different vendor, we can lock them out immediately with managed and again, um. Um, automated. Um, service control policies and resource control policies under the hood. So the sensitive permissions, how that works is if you have, um, and again I think we were they were talking about it in the keynote protecting your identity service, your network service so EC2 like BPC peering connection, those would be sensitive permissions for um for this environment we apply it to multiple environments, but those are the things you really. Decide what you want to protect in those accounts and then you say for EC2 VPCre we want to initiate a POD request for that API call and that will ensure that that message that work flow goes through the team's work flow and for a team's approval. So again if we're talking about the service control policies, those are are denying across the board or whatever scope you're just those are the ones that you say those are the things that we're not gonna do here. And then third party access, you know, prevent that third party, uh, any external accounts from your organization through the sensitive permissions you can block individual API calls that are based on the minor framework on what is, um, you know, managing the risk to that environment and then production I have just in that OU. Quarantine the zombies or whatever, so we just have a threshold 90 days. If it goes past that 90 days, we are going to quarantine that identity and lock it out until it's needed again, if it ever is needed. We have a very low ratio of zombies that have come back and tried to, you know, make a process, but also you can make exceptions to those if there are scenarios where processes run like 91 days or 120 that is a customizable threshold. And then Jit again production access we have that's kind of where we started with KKR production access and the standing access is something we want to get rid of immediately, so we apply Jit right away. So those are kind of the different areas that we're covering and again all under the hood automated, it's deployed through cloud formation, so all the updates that you're doing are through like stacks and stack sets and version control. So this is kind of uh uh the way that we applied so we had um. We started out with kind of doing an assessment of what it could see. We started testing the functionality of the platform, um, you know, testing how this is going to deploy in our environment, testing with the identity account, quarantining the zombies, which just under the hood, just applying a tag, which is how it's so quick, um, it applies a tag and blocks the zombies with that tag. So when you hit teams approved, it's just going to remove that zombie tag and then you're off and running again. Um, but in the meantime, that zom or that. Um, that identity is locked down. You cannot use that identity without the approval mechanism. So we were able to, by doing this, we were able to again allow security teams to gain back control of identity. Allow uh developers to start um getting involved in the platform as well as letting us know their exclusions, letting us know the things that needed to run no matter what, so you can protect and make sure that you're not going to break business processes by doing some upfront work setting up your exemptions at the root. These processes are are business critical. We cannot break these processes so you set those exemptions up and then you fire away. And then we were able to protect our services like EC2 or um our network services, identity and data, um making sure that S3, people aren't making public public buckets or things like that, um, the zombies alone like again at that first slide, and that's continued to kind of, uh, go up like we still have dev processes, even some QA and production processes that just never run, um, something the thing that scaled with us when we first started. Is that the amount of functions, for example, to roles 1 to 1, which is what we wanted, but that number goes up every day on the amount of roles that we have in our environment and so does the risk when the when the rolls amount go up, that's the risk does as well. So that's something we want to get out in front of and proactively protect. So that's again one of those preventative controls that we're doing jit we're doing uh quarantining the zombies, um, and we're not we're not removing permissions, which is the dangerous part. I've looked at a lot of solutions and a lot of them want to remove permissions that you already have, which really means if that process is needed again. Now you got to go figure out what permissions they had before and you've got a whole different set of problems. By taking this approach, you're just locking it down and the permissions stay intact and so that you don't have that risk, but you still have the ability to go back and retroactively get that thing back into into working condition. So, and again, the um the identities of the SSO, the, the, the um service roles, over 2200 identities that we had and again still growing, um. We were able to scope down different services for different accounts, so development we're even a little bit more flexible there. So um our production account is pretty cut and dry. Sunray calculates what services are used in the production account and we allow those, but maybe in a in a development there's really only a short list of services we want application teams to keep, you know, trying out. We want to be able to innovate. We want to be able to move quickly. This is uh this allows us to say in development we're gonna be a little more open production. These are our non-negotiables, so your ability to do that at a at a different scope is, is really easy to do. um, and then the jit access again that's also saved us on on audit trouble. It's a solution that we can easily implement to provide an approval mechanism prior to doing any changes in production, so that saved us a lot on audit. The ability to audit with the records that we have, we have reports we can provide those to auditors. We also get the with the jit access an AI summary of what was done when the person checked out the account, so that is something that will end up like using a web hook to upload it to ServiceNow and that will get us um an automated evidence for our change control system. So, um, let's see, so our operations time again this is gonna take us a long and we would not have been able to do all of the things that it does in that 6 months. 6 months was just to try to build a pipeline to right size permissions that was definitely going to be error prone and probably get us into a few issues. This was the one this is the platform that kind of helped us get to that point without needing that and again 6 days we're able to do our evaluation, turn on like. You can take different approaches in different environments, but you can turn on one click protection and you're locked down day one if you want to take that approach. A little grass but go I mean there's just depends on your, your appetite for risk. OK. Yeah, so I think we've kind of hit on this, but again, quick summary, now we're in a really good condition. We basically do a a true up of zombies, make sure that our, our, um our zombies are quarantined, um. Again, we're we're we're in a much better place than we were, and we've had Sunray for I think someone told me before this, I think we've had it for about a year now, um, and I cannot say enough about how this they've saved us a lot of time and and money. I mean even money you think about services that you block um just by blocking them you're going to save some cost. I got like 2 minutes left, um, but yeah, thank you.
