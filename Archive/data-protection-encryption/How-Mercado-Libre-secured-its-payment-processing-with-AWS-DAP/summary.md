# AWS re:Inforce 2025 - How Mercado Libre secured its payment processing with AWS (DAP301)

**Video Link:** [Watch on YouTube](https://www.youtube.com/watch?v=_TT2uJy90gE)

## Video Information
- **Author:** AWS Events
- **Duration:** 33.1 minutes
- **Word Count:** 4,707 words
- **Publish Date:** 20250618
- **Video ID:** _TT2uJy90gE

## Summary
This presentation focused on how Mercado Libre, one of Latin America's largest technology companies, implemented AWS Payment Cryptography to secure their payment processing infrastructure. The session highlighted Mercado Libre's massive scale, processing $197 billion in payment volume and 11.4 billion transactions in 2024, serving 61 million monthly active users across Latin America.
The presentation demonstrated how AWS Payment Cryptography service helped Mercado Libre replace traditional hardware security modules (HSMs) with a cloud-native, elastic solution that maintains PCI compliance while reducing operational overhead. The service enabled Mercado Libre to handle their extensive payment processing needs while meeting strict security requirements and scaling demands.

## Key Points
- Mercado Libre needed a solution that could handle rapid scaling during high-traffic events like Black Friday while maintaining security
- AWS Payment Cryptography eliminates the need for physical HSMs while maintaining PCI compliance
- The service is fully managed and API-based, reducing operational burden
- Integration with existing AWS services (CloudWatch, CloudTrail, IAM) provides comprehensive monitoring and security controls
- The solution offers high availability and low latency for payment processing at scale

## Technical Details
- AWS Payment Cryptography Service
  - API-based interface
  - Supports PCI PIN compliance
  - Handles PCIP2PE standards
  - Key management capabilities (creating, importing, managing cryptographic keys)
  - CVV2 generation and validation
  - PIN generation and verification
- Integration Points
  - CloudWatch for monitoring
  - CloudTrail for audit logging
  - IAM for access control
  - Fine-grained permissions management
  - Support for card issuing and transaction acquiring
  - Transaction processing capabilities for both merchant and bank/fintech sides

## Full Transcript

Alright, uh, good afternoon, everybody. Uh, thank you for coming to, uh, DAA 301. Uh, how Mercado Libre secured its payment processing with AWS. Um, hope you guys all, uh, got some good lunch in before this. Um, probably have some people filtering in. Uh, I'm Mark Klein. I am the, um, product manager here at AWS for AWS Pay cryptography. I'm joined by Pablo Meanesse from Mercado Libre, the customer as well as Nicholas, uh, Gracing as well, um. For today's agenda, uh, we're gonna learn a little bit about Mercado Libre. Hopefully everybody knows who Mercado Libre is, but if you don't, we're gonna have a quick introduction about that. Um, gonna provide a quick introduction to payment cryptography. Um, you might, you probably know something about that as well. Uh, one of the two if you came to this session, uh, a little bit about the business case and why Mercado Libre was interested in using, uh, AWS payment cryptography intro to their, their architecture. Uh, learning a little bit about how they, how they went about their evaluation process, um, understanding whether it was a good fit for them or not, uh, talking a little bit about the results, what they found in their learnings, uh, where they plan to go from here, and then we'll just summarize up, uh, the rest of the sessions. Uh, with that I'll, uh, turn it over to, uh, uh, I'll turn it over to Pablo, OK. Well thank you Mark. As Mark said, my name is Pablo Milanesa. I work in Mercado Librea as a software project leader. But uh first of all, what is Marco? Let's see. So, um I think all right that's the correct one. So, um, Mercolibrium is one of the largest and most innovative technology companies in the world. For the last 25 years we have been driving progress in Latin America through commerce and financial services, OK. So, um, from Mexico to the south of Chile, Mercado Librea reached a lot of corners in Latin America, as you can see in the pictures. Um, offering payment services and make it easier for sellers and buyers to connect, OK? So that being said, um, Mercado Librea's mission is to democratize e-commerce and financial services to transform the lives of millions of people in Latin America. OK. So that being said, To do that, it relies on an ecosystem that empowers people and business to buy, sell, advertise and access credit online and offline. Let's check these numbers. So we are 25 years old. As I said, um, we are more than 80,000 employees, so it's a really big company. Um, we are NASDAQ since 2007. Actually, we are part of NASDAQ 100 index. And something that it's more recent is that uh we are among the 50 most valued brands in the world according to Canar's 2024 brands ranking so uh that that's. That's a really big deal, uh, really important to us, so. Um, let's see the biggest ecosystem in Mercabolibrea. So the first one that is the marketplace, um, the marketplace is the biggest retailer in Latin America. We have there oil in stores, vehicle, properties and vehicles, digital advertising, shipping logistics, and more. And the other one that is the vintage part that we are going to call from here Marcapao. Um, it's one of the key players in Latin America. We have their payments, digital accounts, credit insurance, benefits, and more, OK? So In this presentation, we are going to focus in the vintage part in Merca Pao. So first of all, uh. We are, um, I'm going to explain what can we do with Merca Pao, OK? So, um, you, for example, you can buy through a QR code. If you have the Mercado Pago application, you can go to a merchant, uh, and as a client just buy using a QR code. Or the other way around, you as a seller, you can sell using a QR code as well. All right. Um, well, we can provide you a Mercadopago point of sale if you are a merchant, so we can provide you that, or you can buy a product with a Mercadopago debit or credit card, and much more, OK? So, Let's check some results about 2024 and the last quarter of 2024. And OK, uh, this first, that's uh we are among the 17 most valuable brands uh in the same ranking, but in the financial sector, OK. And uh the numbers here thinking about 2024, the annual numbers, it's like uh $197 billion total volume of payments, OK? That it's a lot and $11.4 billion total number of transactions. OK, so that was 2024. And uh well you know the the numbers of the last quarter, there's one number there that just catch my attention um because well I I am from Uruguay, you know, the country that it's in South America between Brazil and Argentina, and, uh, yeah, I see 61 million active users per month and this is kind of uh 20 times the population of Uruguay. So, uh, for me it's like really interesting number, you know, um. OK, but these numbers, the results of 2024. Um, all of this just Make me think in challenge, OK, and we, we have some challenge thinking about these numbers. Um, for example, one special date like Black Friday, um, or a great marketing campaign. The use of the vintage ecosystem could increase really quickly, and we need to be prepared for that. Or another challenge, um, it's when we want to integrate with an external provider like AWSpeakrophy. We need to be sure that the external provider can manage all that traffic or volume of transactions, right? Um, so, All right, with these numbers, with these challenges, now Mark is going to, to explain what this. It just make your trophy. So thanks again. OK. Great, so, uh, just a quick introduction before, uh, before the team kind of tells you a little bit about how they're using payment cryptography. I thought I'd provide a quick intro for those that aren't familiar with it. So AWS payment cryptography is intended to replace dedicated payment hardware, um, hardware security modules HSMs that customers have traditionally had on premise as a physical device as customers move to the cloud, uh, they're looking for an elastic, uh, AWS service, uh, that can help replace that. So rather than having dedicated physical devices, it is a purely elastic service. It is all API based, and you can essentially use as much of it as you want. Um, traditional use cases as, uh, Mercado Libre is talking about, uh, card issuing, transaction acquiring, issuer transaction processing, these are the typical parts of a, of a card payment transaction either on the merchant side or on the, uh, the bank side or the fintech side, um, and this handles the typical type of, uh, secure transactions that you need as part of processing a payment, uh, maintaining PCI pin compliance, um, and, and securely managing pins. Uh, managing things securely from end to end using, uh, PCIP2PE standards, uh, creating and importing and managing the keys, the cryptographic keys that are, uh, handling all this, and on the issuing side things like generating CVV2s, generating pins, and then validating that information, uh, when a transaction comes in. This is all integrated into the AWS ecosystem. Um, and as part of that, uh, and AWS services rather, um, and, uh, so you were able to monitor that using cloudwatch and cloud trail and you're able to secure that using tools like I am providing very fine grained access controls, uh, to your service, uh, talking a little bit about benefits. Uh, as I said earlier, uh, it allows you to remove your dependency on, on dedicated payment HSMs, uh, while achieving your, your cloud migration goals. So this allows you to go all in on the cloud and not have, uh, things like payment HSMs that are still out there. Uh, it allows you to reduce your operational burden because it is a fully managed service. You, uh, you can just start using the service by calling the APIs. There's no need to, uh, have, uh, physical devices or, uh, virtual devices that you need to provision and, and they're still responsible for maintaining. Um, and, and this is a, uh, PCI, uh, pin and DSS and, and other compliance standards, um, you're able to, uh, harness the high availability and the low latency, uh, of the service, so you just use it and we as AWF are responsible for maintaining its high availability and its elasticity so you get away from having to do capacity planning and and things of that nature. And then lastly, as I kind of mentioned simplified set up you can just start using it. You just go and uh download the AWSSDK which you're probably using for other services, and, uh, you can just start calling uh APIs to create a key. There's no need to sign contracts or to provision hardware or uh ship hardware or anything like that. We like to say it takes about 5 minutes to get started. uh, and with that I'll, I'll turn that back over to Mercado Libre to tell you a little bit about how they're using the service. OK, yeah, thank you. So, um, let's see the business case, right? So, uh, payment media. I am 100% sure that you, at least once went to a merchant and you just bought something using a credit or a debit card, OK? But to do that you have to request that car to this entity that now we are going to call issue that provides you that car. This issue could be a bank for example, OK? So This is one of the key moments that I wanted to keep you in your mind that is the issue provides a card to card holder so this entity again that we're going to call ISU. Provides a card to a cardholder, first key moment. So let's continue but with an example. OK, so, um, imagine that me, Pablo, um, I decide to go to this. Amazing coffee place that I met, I think 2 blocks from here, just facts, by the way, and uh I decided to buy a coffee, OK. Um, well, you know, now that I am from Uruguay, so I have my credit card that was issued there, OK? So, I go to the coffee place, I just put my credit card on the point of sale. And after 2 or 3 seconds, something happened that allowed me to take the coffee and leave, OK? But how is that possible? This coffee place doesn't know anything about the issue that issued my car or perhaps, or perhaps doesn't even know anything about Uruguay, OK? So the things, uh, I'm not going to enter in details here, but I wanted to show you that behind the scenes there are a lot of entities that intervene in the authorization process, OK? And the issuer has the final decision, OK? And this is the 2nd key moment that I wanted to keep you in your mind. That is the authorization, the issue process and authorization request for a transaction. OK. Um, this is a really big world. After the merchant, we have the payment gateway, the acquired entity, the card network, and finally the issuer, OK, and all of that works together because of a lot of standards and of course using the card information, but here in this presentation we're going to focus in the issue entity, more precisely in the issue processing, OK. And uh it's good to say that in Mercado Pago we have presence in the acquired entity and in the payment guide entity. But again, here we are going to talk about the issue of processing. OK. So, let's continue. Um, well, even more precisely, we're going to talk about the responsibility to ensure security in the use of the cards. Do you remember the two key moments that I mentioned a few minutes ago? So the first one, it's uh when issuing the car. Thinking about to ensure security, we need to create and protect the sensitive data, OK? And the second one. That is, when authorizing our customer transactions, we need to take care about authenticity, integrity and confidentiality. And how we do that? All right, applying cryptography through HSMs. This hardware security model that Mark mentioned before, OK, that this hardware is dedicated to apply cryptography. And we do that by sending comments, OK? So Let's check some common examples to understand how we apply cryptography through HSMs. For example, Let's take a look. Um, to, uh, to this table. So, uh, here we have a Some functionalities like authenticity and we have the command generated. That, uh, actually, uh, you know that data that appear usually behind the car, that's security number, right, we, uh, apply cryptography to generate that number and, uh, well, for example, in the cardholder authentication when you put the pin on the point of sale. All right, we need commands as well. And uh well, when we take care about the cheap information, uh we have the common validate ARQC for authenticity and integrity validation. So This table is just an example. We have more commands in our solution, but uh just to show you how we apply cryptography through HSIs. OK? All right, so, um. The next We are going to see the architecture, the solution before we integrate with AWS payment cryptography, OK? So how we take care about the business case that I explained before. So let's check the architecture. This is an application, HSM as a service that we created in MercadoLibre. And uh this is just a representation of a group of applications that we're going to call issue authorization that uh this group of applications just want to apply cryptography through the HSMs, OK? So just request some comments to this another application HSM as a service. Um, all of these obligations. are in a cuberA technology in the same AWS account. So, uh, it's good to say that uh before even thinking about AWIS payment rytography, we already had AWIS technologies, OK? But let's continue. So, um, It's important to say we were talking about authorization transactions, so this is a critical process, so we need to think about resilience and redundant. So the thing here is that we are multi-provider. So these providers are actually HSM providers and each provider has more than one hardware and we connect this application with TCP connections with each hardware, OK? Well, this is easy, uh, thinking about the critical process. If one endpoint doesn't work, you have the other ones, that's the thing, um. But, uh, OK, we know that availability is important to everyone, but as you can see here, availability it's uh one of our uh solution prioritization. So we prioritize uh availability. Uh, with other things, of course. Well, um, but how is the strategy? How is this work, uh, when I come and just, uh, come to the service? Let's see. Uh, all right, again this is more simplified, but we have this HD command that just come to the HSM as a service. So here we do a broadcast to each endpoint of each provider and the provider, the providers are going to answer a results and the first answer that came to the service is going to be propagated to the client, OK? And of course all of this is possible because all the common kids are propagated in all the hardwares in all age sense. So, uh, but again, the solution prior priority here is the redundant and the resilience, OK? But let's check uh the business model of these providers and some paints that we have with this, with this architecture. So um The business model of the providers is fact bandwidth. That means that for example you have a maximum capacity of commands per second, for example, 200, OK? And if you want to upgrade for more, this is a long and bureaucratic process and the next step, it's too far away from the previous one. For example, um, perhaps you have a maximum capacity of 200 and the next step is 800, OK? But do you remember the Mercado Pago scenario? We are actually continually growing so we need upgrades and we have this special dates that I mentioned before like Black Friday that we know that the traffic can increase very quickly, right? So we need to be prepared for that. We need to take care about that date so we need to just to have a really high step, you know, but with the regular dates, uh, we are over provisioning for transaction capacity. Uh, this is not elastic, you know, it has maximum capacity and steps. That's the thing. Well, uh, to sum up the pains, I think, uh, this is a good representation that it is essential for us that the services we integrate with provide us agility when it comes to scaling. OK. Now Nicolas here is going to explain about the rollout process with FWS by Murphy. Well, thank you, Paulo. Hello everyone. I am Nicolas Grey. I work at MercadoLibre as technical leader, and I'm here to show you how was the process we follow to adopt payment cryptography. First, let's take a look at our architecture after the integration. Uh, you can see, there is now many changes for what Pablo presented before. Um We get the same strategy. Of prioritizing resilience for redundancy by adding Amrotrophy as a new HSM provider. But of course, there are, there are some differences, and I want to share with you. Uh, payment cryptography is a fully managed service, which means that um the service itself is an attraction of many physical HSMs. So in terms of redundancy, it's even more redundancy for us. Also, uh, fully managed means that we don't need to worry about HSM maintenance. AWS that's it for us. Another difference is the way we connect with HSMs. While with other providers, we do it by implementing some complex protocols over TCP. where we have to manage connection pools and we need to understand those products that is not always a simple task. Instead with ado adoring trophy. We use the SDK they provide for our programming language. And in case your programming language doesn't have that SDK you can always rely on the rest APIS provider as well. Um, I think this is way easier to interact with using this kind of technologies, you know. Finally, There is another difference in how we configurate the application because ADS payment cryptography and our HSM as a service shares the same ADS account. So if, for example, we want to segregate our environment is into testing production, the only thing we have to do is to set up the IM profiles and roles accordingly, OK? So Um, now that you have an overview of our architecture. I'm gonna share with you which steps we gave since we started, started exploring the service until we got it productive. First, of course, we started by analyzing the service documentation. We had those meetings with the AOS team where, where they explained the service and its capabilities. Also, we did a workshop where we played a little bit with the ASCLI to send comments and get along with the service. But we wanted to learn how to integrate using the SDK. And we wanted to validate that every single comment we needed was supported by the service. So in order to do that, we implemented this functional POC proof of concept where we developed a new application in the same programming language that we use in our HSM as a service. And using the deK we send commands to the service to test them. First, we did it by using some random generated keys, but as we already had some integration tests with the other providers that Pablo showed, uh, we decided that it was a good idea to compare results, you know. So, in order to do that, we needed to get those keys that we had in those integration tests and Share share them with the AWSography service. How is that done? OK, we execute this key migration process and explain where, where we using uh asymmetric cryptography, we share a symmetric key encryption key and with that symmetric key encryption key, we were able to share all the keys we needed for the test. Once we got those keys. Share in both providers. We run this again and we knew for sure that the functionally the service satisfies our needs. But as Pao told you before, Um, scalability is critical for us. So, we wanted to test that. We wanted to know how would the service behave on some scaling scenario. So using this same application I told you before, we implemented this test, the non-functional POC, where we wanted to be representative, representatives of the reality, so we wanted to um get the same proportion of common types uh in this test. So if we have, I don't know, 20% ARQC validations, 15% invalidations, adults 10% CVV validation, sorry for that. Uh, we will get the same proportion here, OK, in this test. So we also set us a goal of 1000 cos per second for the test. Uh, we saw that it was, it would be challenging enough that that quantity of comments, and as scalability was the main point of the test, we decided to, well, we designed this increments here where, where, where we started with 50 per seconds. And in and within 3 steps we reached to 1000 calls per second and we left it there for 150 minutes. I think it's good to point out that every step we gave there was made just 30 seconds. So I think that's pretty aggressive, you know. So now, let's take a look at some of the results of this test. We, um, had a penatified response time of 759 milliseconds. What means that the most we sent to the service was responded in that time or less. Uh, also, we had a maximum response time of 250 milliseconds. And we had no error at all during the whole test. I think that's kind of impressive because when you are doing the kind of tests that are kind of aggressive in terms of scalability, maybe you can tolerate some low error rate, but that was that that was the case. So how do we integrate on? There are some risks we have to mitigate, you know, because we are in a critical process and We are to that nothing can happen when we integrate with the service. So we implemented this strategy where uh it's kind of, we tested the service. On the on the productive environment, you know? So, because What, what could happen? What is, what is the world that could happen? For example, if using the strategy that Paolo mentioned before, if we receive a, I don't know, a pin validation because the client is trying to buy something and If a cryptography is the first that responds and for example, we migrate the a key in the wrong way, maybe we are answering something we don't want to answer to the client and the clients will, will be angry, you know, so. For that reason, we did this driver strategy where we did send the comments topetography, but we, we wouldn't respond or propagate it to the client. Instead, we compared the response with the response of the other providers. And we could be sure that every single woman and every single key we needed was OK, we're OK, sorry. So we also did this drive strategy progressively, you know, we started by sending just 20% of the common to the payment cryptography service because we wanted to be or we wanted to take take care of our sources. We were integrated with a new service using a third party SCK. So we really wanted to know that we had no memory leak or we didn't have an unexpected CPM increase, and in case we have it, we wanted to mitigate that risk. So after we realized that everything was for defined in in this. About the resources we start to incremented the quantity of comments we send to the payment service until we get to the 100% and after reviewing our metric for a couple of days and see that every common were was being responded accordingly. We decided to disable this mode for the paymentryptography provider and we were with the service fully productive, OK? So now, let's take a look at the results since we integrated with McDuffie and the um roadmap we have with the service in MercadoLibre. Well, since we interacted with payment cryptography, we have responded more than 700 million comments using the service. Those comments will respond in with a P95 response time of 6.06 milliseconds. We have had peaks of 200 commands per second, and we haven't experienced any downtimes on fire so far the story. Uh, not even a maintainous, no. Uh, in terms of what's next with MercadoLibre and Penmetography, well, in Mercalibre we have present in all those yellow painted countries. But we are using payment cryptography on Mexico, Brazil, Chile, and Argentina. Only on our business. Now we are planning to expand the use of payment cryptography in our payment gateway solution. And probably in the near future we are going to expand the use of our products to other countries as well, so that would increase the use of cryptography also in those countries. Finally, I wanted to make a summary of what we have been talking here. First, we think that payment cryptography has an interesting business model where you pay for what you use. Also, we know for sure that the service scale up pretty easy and fast, as you said. And those two points, I think it makes the service pretty elastic. You are never overprovisional or underprovisional. And that was one of the principal pains that Pablo was playing before. Um, also, I wanna point out that the integration process is using the SDGs, uh, or the rest API. And, finally, I want to say that payment cryptography is a fully merged service which is great for redundancy, resilience, and not to worry about HSM maintenance. Uh, when my part of the presentation, I wanna say the AOS team, both account and service because they have been very supportive during the whole process of integration, and I think we had a great synergy doing that. So thank you and I'll leave you with Mark again yeah good thank you thanks thanks very much for that. So, um, so we reached the end of our, uh, session today. Definitely wanna thank, uh, Pablo and Nicolas for, uh, telling us a little bit about their experience. Um, great to hear about 11 billion transactions that you guys are doing such a great success for your company. We're glad that we can help provide. Um, the underlying infrastructure to help you guys be successful on the technology side, both payment cryptography and other AWS services as well. um, please make sure to, uh, fill out the survey. You should get that prompted in your app, um, that always helps us make these sessions better and make sure that it. Uh, helps you get the information that you want and, uh, the three of us will be, uh, outside of the, um, outside of the event as well if you have any quick questions, uh, and our LinkedIn information is available here if you have any uh questions for any of us at any time and with that, uh, thank you guys very much for attending today. Thank you.
