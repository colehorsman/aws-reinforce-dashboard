# AWS re:Inforce 2025 - I didn't know Network Firewall could do that! (NIS322)

**Video Link:** [Watch on YouTube](https://www.youtube.com/watch?v=RHjUeVYxtdE)

## Video Information
- **Author:** AWS Events
- **Duration:** 19.0 minutes
- **Word Count:** 3,246 words
- **Publish Date:** 20250619

## Summary
This AWS re:Inforce 2025 session focuses on lesser-known capabilities of AWS Network Firewall, presented in three main areas: deployment, defense, and detection. The presentation highlights recent feature releases and advanced capabilities that extend beyond basic firewall functionality.

The session covers various deployment models, including distributed, centralized, and combined approaches, with special emphasis on new features like native Transit Gateway integration and multiple VPC endpoints. The speaker details advanced defensive capabilities such as application layer intelligence, TLS inspection, and the newly launched active threat defense feature that automatically creates rules based on real-time threat intelligence from AWS infrastructure.

The presentation concludes with monitoring and detection capabilities, including the recently launched native dashboard feature that provides immediate visibility into traffic patterns, top talkers, and security events. Throughout the session, the speaker provides numerous resources through QR codes and blog posts for attendees to learn more about implementation details.

## Key Points
- New native Transit Gateway integration simplifies complex routing configurations
- Multiple VPC endpoints now supported for single firewall across different accounts
- Auto-scaling capability up to 100 Gbps per AZ with consolidated billing
- Advanced application layer (Layer 7) filtering and TLS inspection capabilities
- AWS Managed Rule Groups (AMRs) provide pre-defined security rules
- Automated domain lists feature helps identify and block malicious domains
- Geographic-based filtering for traffic control by location
- Active threat defense feature launched with automatic rule creation
- Native dashboard capability for immediate visibility into traffic patterns
- Integration with various logging and monitoring solutions (CloudWatch, S3, Kinesis)

## Technical Details
- Deployment Models:
  - Distributed: One endpoint per Network Firewall per VPC
  - Centralized: Integration with Transit Gateway for cross-VPC filtering
  - Combined: Separate firewall endpoints for internal and egress traffic

- Security Features:
  - Layer 7 metadata filtering
  - Suricata-based intrusion detection and prevention
  - TLS inspection for both ingress and egress traffic
  - Certificate-based encryption/decryption capabilities
  - Geographic location filtering using digit codes

- Monitoring Capabilities:
  - Flow management with 5-tuple criteria matching
  - Flow flush feature for traffic control
  - Native dashboard with traffic summaries
  - Integration with CloudWatch, S3, and Kinesis
  - Top talkers and rejected traffic analysis

- Management Features:
  - Cross-account firewall endpoint deployment
  - Automated domain list generation
  - VPC routing enhancements for subnet-to-subnet inspection
  - Consolidated billing for multiple endpoints

## Full Transcript

Welcome everyone to I didn't know AWS Network firewall could do that. Uh, I'm happy to see so many of you here. Uh, we're gonna blast through this, and I really mean blast through this, uh, because we're gonna hit three areas about what network firewall can do, and that is gonna be, uh, what we do with network firewall when we deploy, when we defend, and when we detect or discover things that are going on after network firewall is out there and running. Uh, and so we're gonna jump back and forth talking about things that you probably already know very briefly and then we're gonna touch on things that maybe you didn't know and I'm gonna give you a whole bunch of resources. There's gonna be QR codes, so have your phones ready to grab those those resources because we're not going super deep. I'm just introducing you to all these topics that network firewall can do that you probably didn't know it was able to do. So let's uh let's start out uh talking about the deployment models, you know, OK? So there's a whole bunch of deployment models for AWS network firewall to fit different use cases, different scenarios, right? So you have a distributed deployment model. There's a blog post on it it covers it in great detail and in this situation you'll have your firewall endpoints in each VPC. And you get one endpoint per network firewall that's in a VPC, so you're gonna distribute that across your different VPCs where you wanna do your filtering. You probably know that already. It's been that way for a while. There's also a centralized deployment model, OK, the centralized deployment model again it's in the same blog, but in this situation we're integrating now transit gateway. And to be able to filter between the VPCs we'll send our traffic from the VPC over the transit gateway through an inspection VPC where we've got that one endpoint per network firewall in a VPC. And then we'll send it back to Transit gateway and then to either another VPC or we can route it out our Internet gateway to the Internet back and forth, but we have some routing involved there, right? OK, then there's the combined deployment model again something that's been around for a while, but in this case it's the same as that centralized with the transit gateway and the firewall endpoint over there but in this situation we have an egress over here for Internet connectivity and we want a different firewall endpoint in that VPC. Different firewall endpoint, different firewall. And it would filter traffic there and have policies if you wanted the policies to be shared, you could have the, the state for the rule groups that can be, uh, they're modular, they can be applied in other places but again. Two different firewall endpoints, 2 different VPCs, OK. So those are the models that that you know uh this is something that you may not know, but this launched yesterday and it's native integration with AWS Transit gateway and this is really cool because it's an easy button and what this does is rather than having to prepare your transit gateway configuration and then configure your route tables and then deploy your firewall and then update your routing tables and tie all that together. As you deploy your firewall, you get an option. Do you want to attach this to a VPC or to Transit gateway? You select Transit gateway, you get your drop downs, you pick your gateway, it does all your routing stuff for you, right? So super cool, super fast integration, making it easy to do more complex things. This is available right now in 5 regions and soon it'll be deploying, uh, in others. So that was yesterday. That's really cool. Now this is something that's also been around for a while and just to touch on it real quick um it's network firewall with VPC routing enhancements so here's what happens, right? So we're in this VPC we got a firewall endpoint and to go between different subnets. You do local routing so you couldn't pass traffic through the firewall end point if you were going between like the app subnet and the database subnet didn't work like that before, right, because it just route locally. It doesn't have to pass through a firewall with this, uh, routing enhancement, VPC routing enhancement, it now lets you bypass that default routing and send traffic through the firewall when you're going between those different subnets, OK, that's been around for a while. It's also in that blog post there, um. But those are really deployment models that you already know or that you've already been able to see. Here's one that's new that you probably didn't know about, and it is multiple VPC endpoints. So this lets you take uh a single firewall and have multiple endpoints within the VPCs that you want inspection to be in the ones that you want to protect. So remember it used to be one firewall endpoint per VPC right? per firewall, uh, now you can have multiple and it can be uh between accounts as well, right? So you can be like the firewall owner and you can get the billing for that. And then in another one of your accounts in a VPC you want to protect there you can deploy a firewall endpoint and And take care of it there right? so that's a really cool uh brand new feature and this is like. A couple weeks ago that this was was released, OK, so that's a firewall, uh, feature that you, you probably didn't know, um, and then of course auto scaling up to 100 gigabit per second per uh AZ as well so cost savings because of the consolidated billing and not having to have different firewalls attached to different VPCs, so cool stuff. OK, I said we're gonna move fast through this, right? so lots of features to cover. OK, so those are deployment models, right? And I gave you the blog post links to go get all the detailed info on how to deploy that, but now that we're deployed, let's say we're deployed now, right, and one of those models. Let's talk about the uh. The next step defending right? So let's talk about features that you probably knew network firewall could do and these are things that you just look at it and you're like it's a firewall, of course it should do state full traffic inspection, right? Of course it should be able to filter traffic in and out of my gateways and do IP based filtering and and basic protocol filtering. Yes, it does, it does all that basic stuff, but network firewall is not basic. It's not a basic firewall. It's got a lot of other features, maybe features you don't know about, so let's talk about them, OK? So, uh, some advanced capabilities. So there's application layer intelligence. Did you know that you can do, uh, filtering on layer 7 metadata, right? You can write that right into your rules. There's capability there TLS inspection, uh, so that deep packet inspection stuff, uh, it's got, uh, intrusion detection and prevention. Uh, it leverages, uh, Circata, uh, that, that open source, uh, engine and, uh, can detect and prevent, uh, network-based attacks, so a lot of advanced capabilities there. There are things called AWS managed rule groups or AMRs. If you don't wanna build the custom rules yourself, which you can do, you can simply use AWS managed rule groups, enable those rule groups. These are predefined, they're updated by AWS when they need to be, and you can set those rule actions to alert you if you want to put it in like a monitor mode for a while and you can also combine it with the custom rule groups that you create, right? Now there's two types. There's the domain and IP manager role groups and the threat signature management groups, and those threat signature management role groups basically make it an IPS, right? So kind of cool. All right, in addition to that, Let's talk about malicious domains because we're we're concerned about that. We want to defend against them. Well, if we're gonna do that then we have to curate a list of all of those domains and there's different ways that we can get those lists, but then we gotta look through them and figure out which ones we're gonna filter based on. Uh, sometimes when we start building those rules it's complex and you know we end up with some gaps sometimes. Well, not long ago we released automated domain lists this automated domain list features so here's what you do you turn it on. It sits and does analysis for a while and then it creates a list of all those domains and then you get to go back and review the list of those domains that it's built for you and right from there you can tell it to go ahead and create rules for you to block those domains, right? So another feature that maybe you didn't know you could do that but making things easier for you to get to that data, figure out what you want to defend against and then implement some rules. OK, really cool stuff, but we're not done yet. Geographic threats, right? You wanna filter traffic to and from certain geographic locations, not a problem. We've released that there's the blog post for that one up there, but it's real simple. You go into your rules as you're creating a rule and you say I wanna do geographic filtering and you pick the different geos and it just uses a little digit code to identify the geographic location, right? So it's almost like writing like a regular network access control list but you're doing it based on geographic locations to and from. And then you can either deny or allow right? so really easy to do, easy to set up very powerful capability. OK, TLS encryption, right? So to be able to really get in and inspect the contents of a packet, it's not so easy to do when that packet's encrypted, right? So. AWS network firewall now can simplify things that some of that management complexity that you have, uh, it can help you meet compliance and then improve the visibility into that that encrypted traffic by doing either egress TLS inspection. Right, and so this is a very detailed looking, uh, diagram. There's kind of a lot that goes behind it, but basically you provision your certificates you set up your TLS, uh, configuration, and you create your firewall policy. You attach the TLS configuration to your firewall as you as you build it out, uh, and then a certificate is made available to network firewall. Uh, and then that firewall is now able to, uh, establish those connections on both ends, right, because it's got the certificate and it's in the middle and it decrypts, inspects the packet, re-encrypts it, and sends it on its way, OK? And this is supported for, uh, egress, the two QR codes, one of them is a video demo, uh, that I did, and the other one is, uh, a blog post that gives all the details. This is for egress. And on the next page I'll pause just for a second and talk through that because the next page is your ingress TLS inspection. OK, so whole bunch of stuff going on here, right? There's a lot, and I know we're flying through it. We're about halfway there, is that all right? OK. All right, so ingress and egress TLS inspection. Now this is really cool. I'm so excited to be able to talk about this because this launched in the keynote today, uh, active threats. What do we do about active threats? Threats that are happening right now? Well, you think about the challenges that we have, right? The threat landscapes evolving, we try to manage this with multiple tools and different threat feeds and maybe we have third party solutions we're mixing all this and then we have a delayed response to when a threat is active. Well today we just launched active threat defense, right, managed rules for network firewall. So before I showed you the AMRs and there were two types, this is the third type, brand new, and when you enable this type, what happens is we take threat intelligence data from the AWS. Infrastructure right through something called mad pot that we've been using for a while. And we identify threats that are active we create rules automatically and can apply those for you while the threat's active. Threat's gone, rules can go away, right? New threat, new rule, right? Really cool stuff, real easy to enable as well if you wanna learn more about this, there's a a detailed session on it. And it's tomorrow at 8:30 a.m. And uh I recommend you check that out. It's really cool. All right. So, um, Now we've got policy applied and we've got different ways to apply policy uh, what do we do with our flows right? Well, we have a flow management feature, uh, some flow capabilities we can capture flows, uh, for visibility and troubleshooting. There's a flow flush feature where you can look at certain flows and you can flush them out, uh, and then we have flow filters that are gonna let you match, uh. On 5 t criteria if you're looking for specific flows, right? So again giving you that deeper capability to get in there and and see the things that are happening with your firewall. That's a lot. OK, we're not done yet. There's still a couple more things, um, and we're kinda we're kind of trailing out to the end right because I've gone through so much of this, um, now that that we are defending our traffic or defending our infrastructure, um. Monitoring is like the next thing that we talk about, right? So we've deployed, we're defending, uh, and now we wanna monitor so let's let's talk about that. And uh how we discover what's happening. So I know you probably all know this already, uh, logging and monitoring features that you probably know would include something like uh what do you think, uh. Uh, cloudwatch, yeah, right, you just send everything to cloudwatch and then what do you do? You filter through it, right? or get some tool that's gonna help you look through it, right? You write filters for that, uh, send the traffic over to S3, right? Log it all to S3, uh, kinesis, right? Or a partner solution, right? You send, send your log data there. Right? And then you still have to be able to visualize it somehow, uh, and kind of identify from there what's going on. Well, here's another one of those features. This is the logging and monitoring feature that maybe you didn't know network firewall could do and the reason I say maybe didn't know that network firewall could do this is because uh this launched like a week ago, um, like on the 6th or something like that, so not, not very long ago, but, uh, AWS Network firewall now has native dashboard capability, uh, right in, right in the AWS console, and so, um. In here you can see, you know, traffic summary, right? So yeah we can write filters and we can go pull that data and then we can identify that oh we've seen 6,461 connections and we've rejected 1900 and we've dropped 1300 or we can have the native dashboard just tell us that so we know quickly what's going on, right? Uh, and then what about top talkers, right? So we have top talkers, that's useful information. Right? All right there in my dashboard. Uh, there's some more, uh, stuff to look at here in that dashboard, so top rejected traffic and we get details on that top dropped traffic, uh, and then, uh, you can even see down here I don't think I highlighted it, but top long live TCP flows, uh, top TCP flowsin without sinac, right? And you get addresses, you see the sessions, right? And then of course you can go in and you can start filtering on those sessions and. And figure out what's going on and do you need to write rules for this, right? Is this OK? Is it not OK? Uh, and then, uh, For TLS, right, so let's talk about the, the SNI, and we know that's uh something that we wanna keep an eye on SNI uh spoofing things like that. So in here we can actually look and see the top alerted TLS SNI. And it gives us a list of those and the hit count and we can see the top dropped or rejected TLSSNI's and we get a count for those, OK? And then from there we can just dig into it and decide do we need rules for this? do we not need rules for this? Is this traffic I expect to see is this traffic I don't expect to see. So that brings us to uh this slide where I say uh a whole bunch of the stuff that I just talked about like a lot of it uh is covered in these three sessions. These have not happened yet even though we've already had sessions we have repeats of some of the sessions. Uh, the scaling threat prevention with AWS and Surakata, um, that's gonna go into the rules, right, and your threat prevention, and that's today, uh, later on at 4:30, uh, and that is a builder session and so if you can make it to that builder session, you can actually sit down at a table. There'll be 10 of you and a presenter at that table and you'll get to actually walk through that stuff, uh, and learn all that. The other one is uh thinking beyond traditional firewall architectures is a really interesting one that is a breakout session, um, and that's tomorrow at 8:30. That's actually at the same time as the session that's gonna go into more detail on, uh, the active threat defense, uh, and some of those other features, the brand new features that we talked about and then finally, uh, if you wanna just sit for like 90 minutes and I think it's 90 minutes and just do the work in a workshop. The, uh, securing AWS egress controls to defend against zero day and ransomware attack is uh or ransomware is, uh, a workshop that you can jump into uh tomorrow afternoon. I think that's tomorrow afternoon, right? Yeah, Wednesday, yeah, OK, so with that, uh, I wanna say thanks for joining me for this session. Uh, I'm down to 1 minute left, so we made it through all of those really cool features the network firewall. Uh, thanks, and, uh, take some time if you don't mind, fill out the session survey. We really appreciate it and if you have any questions that I can answer, I'll be over here for just a couple minutes to uh fill those for you. Thank you.
